{% extends "base.html" %}
{% load thumbnail %}

{% block content %}
<div id="content_hero" style="background-image: url(/static/img/movie-main_banner.jpg)">

	<!-- <img src="images/scroll-arrow.svg" alt="Scroll down" class="scroll" /> -->

	<!-- Content -->
	<div class="container">
		<div class="row blurb scrollme animateme " data-when="exit" data-from="0" data-to="1" data-opacity="0" data-translatey="100">
			<div class="col-md-9">
				<span class="title"></span>
				<h1>
					{% if request.path == '/videos/documentales/' %}
						Documentales
						{% endif %}
						{% if request.path == '/videos/series/' %}
						Series
						{% endif %}
						{% if request.path == '/videos/peliculas/' %}
						Peliculas
						{% endif %}
				</h1>
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="/">Inicio</a></li>
					<li class="breadcrumb-item active white-color" aria-current="page">
						{% if request.path == '/videos/documentales/' %}
						Documentales
						{% endif %}
						{% if request.path == '/videos/series/' %}
						Series
						{% endif %}
						{% if request.path == '/videos/peliculas/' %}
						Peliculas
						{% endif %}
				</li>
				</ol>

			</div>
		</div>
	</div>

</div>

{% for x,y in movies_by_cat.items %}
<div class="container section {% if not forloop.last %}rm_padd_bottom{% endif %}">
	<div class="row">
		<div class="large-12 columns">
			<h2>{{x}}</h2>
			<div class="owl-carousel owl-theme slick-slide">
				{% for video in  y %}
				<div class="item">
					<div class="movie-poster grow">
						<aside>
							<div>
								<a href="{% url 'Video_detail' video.slug %}" class="play">
									<i class="material-icons">play_arrow</i>
								</a>
								<span class="date">
									{% for cat in video.categoria.all|slice:"3" %}
										<i class="material-icons" style="font-size: 8px;">fiber_manual_record</i>{{cat}}
									{% endfor%}
								</span>
								<a class="material-icons expand-more" data-toggle="collapse" href="#{{x}}_{{video.id}}" onClick="reply_click(this.href)">
										keyboard_arrow_down
								</a>
								
							</div>
						</aside>
					
						{% thumbnail video.imagen "1280x720" crop="center" as im %}
						<img src="{{ im.url }}" alt="">
						{% empty %}
						<img src="http://via.placeholder.com/1280x720 " alt="">
						{% endthumbnail %}
					</div>
					<div>
						<h4 id="video_name_{{video.id}}_{{x.id}}" class="no-underline white-color hg_video">
							{{video}}
						</h4> 
						<a id="expand-icon_{{video.id}}_{{x.id}}" href="" class="hidden">
							<i class="material-icons" style="font-size: 32px;">
								expand_more
							</i>
						</a>
					</div>
				</div>
				
				{% endfor %}
			</div>
		</div>
	</div>
</div>

{% for video in  y %}
	<section class="dark collapse" id="{{x}}_{{video.id}}" data-parent="#accordion">
		<a class="close_collapse" data-toggle="collapse" data-target="#{{x}}_{{video.id}}" aria-expanded="false" aria-controls="nuevo_{{video.id}}">
			<span class="material-icons">close</span>
		</a>
		<div class="container remove-bottom-padding">
			<div class="row comingSoon-slides">
				<div class="col-sm-12">
					<div role="tabpanel">
						<!-- Nav tabs -->
						<ul class="nav nav-tabs nav-custom" role="tablist">
							<li role="presentation" class="active">
								<a href="#{{x}}_{{video.id}}-detalles"  aria-controls="#{{x}}_{{video.id}}-detalles" role="tab" data-toggle="tab">{{video.nombre}}</a>
							</li>
							{% if video.tipo.nombre == 'Series' %}
							<li role="presentation">
								<a href="#{{x}}_{{video.id}}-episodio" aria-controls="#{{x}}_{{video.id}}-episodio" role="tab" data-toggle="tab">Episodios</a>
							</li>
							{% endif %}	
						</ul>
					
						<!-- Tab panes -->
						<div class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="{{x}}_{{video.id}}-detalles">
								<div class="row single-slide">
									<div class="col-sm-5 col-xs-12 slide-content">
										{% for cat in video.categoria.all|slice:"3" %}
										<span class="title">{{cat}}</span>{% if not forloop.last %},{% endif %}
										{% endfor%}
										<h3 class="no-underline">{{video.nombre}}</h3>
										<div class="date">
											<i class="material-icons">date_range</i> {{video.fecha|date:"d F Y"}}
											<i class="material-icons" style="margin-left: 5px;">
													av_timer
											</i>{{video.duracion}}
										</div>
										
										<p>{{video.sinopsis}}<p>
										<span class="details">Productora: {{video.produccion}}</span>
										<span class="">|</span>
										<span class="details">Pais: {{video.pais}}</span>
									</div>
									<div class="col-sm-6 col-xs-12 col-sm-push-1 slide-video">
										<a href="{% url 'Video_detail' video.slug %}" data-vbtype="video" class="video">
											<i class="material-icons">play_arrow</i>
											{% thumbnail video.imagen "1280x720" crop="center" as im %}
												<img src="{{ im.url }}" alt="">
											{% empty %}
												<img src="http://via.placeholder.com/1280x720 " alt="">
											{% endthumbnail %}
										</a>
									</div>
								</div>
							</div>
							{% if video.tipo.nombre == 'Series' %}
							<div role="tabpanel" class="tab-pane" id="{{x}}_{{video.id}}-episodio">
								<div class="row">
									<div class="col-sm-12 col-xs-12 slide-content">
							
										{% for temp in video.temporada_set.all %}
			
										<h1>Temporada {{temp.id}}</h1>
										<div class="owl-carousel owl-theme">
											{% for ep in temp.episodio_set.all %}
											<div class="item">
												<div>
			
													<a href="#">
														{% thumbnail ep.imagen "256x340" crop="center" as im %}
														<img src="{{im.url}}" alt="">
			
														{%empty%}
														<img src="http://via.placeholder.com/265x340" alt="">
														{% endthumbnail%}
													</a>
													<h4 class="left no-underline"> {{ep}}</h4>
												</div>
			
											</div>
											{% endfor %}
										</div>
			
										{% endfor %}
			
									</div>
			
								</div>
							</div>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endfor %}


{% endfor %}<!-- fin for loop videos por categoria -->


{% endblock content %}

{% block extra_js %}
<!-- <script>

jQuery(function ($) {

	$(window).on('load resize scroll', function(){ 
		{% for x,y in movies_by_cat.items %}
		$('#cat-{{x.id}}').not('.slick-initialized').slick({
			autoplay: false,
			autoplaySpeed: 3000,
			slidesToShow: 4,
			centerPadding: '60px',
			prevArrow: '<i class="material-icons left">keyboard_arrow_left</i>',
			nextArrow: '<i class="material-icons right">keyboard_arrow_right</i>',
			responsive: [
			    {
			      breakpoint: 768,
			      settings: {
			        slidesToShow: 2
			      }
			    },
			    {
			      breakpoint: 480,
			      settings: {
			        slidesToShow: 1
			      }
			    }
			  ]
		});

		{% endfor %}
						
	});
});

</script> -->
{% endblock extra_js %}


